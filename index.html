<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forte Card Previewer - v2.5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Pirata+One&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/mobile.css">
    <link rel="stylesheet" href="assets/css/enhanced-styles.css"> 
    
    <script src="filter_config.js"></script>

    <style>
        /* Fallback for CSS variables if theme.css is not loaded or they are missing */
        :root {
            --color-background-body: #111827; /* bg-gray-900 */
            --color-text-primary: #f3f4f6;    /* text-gray-100 */
            --color-text-secondary: #9ca3af; /* text-gray-400 */
            --color-border: #374151;         /* border-gray-700 */
            --color-background-panel: #1f2937; /* bg-gray-800 */
            --color-background-alt: #374151;   /* bg-gray-700 */
            --color-background-input: #4b5563; /* bg-gray-600 */
            --color-text-placeholder: #9ca3af; /* text-gray-400 */
            --color-primary: #f87171;          /* Example: red-400 */
            --color-accent: #f87171;           /* Example: red-400 */
            --color-accent-light: #fca5a5;     /* Example: red-300 */
            --color-secondary: #60a5fa;        /* Example: blue-400 */
            --color-success: #34d399;          /* Example: green-400 */
            --color-error: #f87171;            /* Example: red-400 */

            /* Spacing variables used in enhanced-styles.css */
            --space-1: 0.25rem; /* p-1 */
            --space-2: 0.5rem;  /* p-2 */
            --space-4: 1rem;    /* p-4 */

            /* Radius variables */
            --radius-full: 9999px; /* rounded-full */
            
            /* Z-index variables */
            --z-popover: 1000;
            --z-toast: 2000;
            --z-modal: 1500; 
            
            /* Transition variables */
            --transition-fast: 0.2s;

            /* Shadow variables */
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        /* Basic body styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background-body);
            color: var(--color-text-primary);
        }
        .title-glow {
            font-family: 'Pirata One', cursive;
            text-shadow: 0 0 5px var(--color-accent), 0 0 10px var(--color-accent), 0 0 15px var(--color-accent-light);
        }
        .logo {
            height: 40px; 
            width: auto;
        }
        /* Styles for the loader in page-loading-overlay */
        .loader {
            border: 4px solid var(--color-background-alt); /* Light grey */
            border-top: 4px solid var(--color-accent); /* Blue */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <div id="page-loading-overlay">
        <div class="loader"></div>
        <div id="loading-text">Loading Card Data...</div>
    </div>

    <header class="app-header">
        <div class="header-content">
            <div class="brand-area">
                <img src="https://raw.githubusercontent.com/Envoyofhell/Pocket-Image-Previewer/Forte/resources/forte-arrivals.png?raw=true" alt="Forte Logo" class="logo">
                <h1 class="title-glow text-2xl md:text-3xl">Forte Card Viewer</h1>
            </div>
            
            <div class="search-container">
                <input type="text" id="card-search" class="search-input" placeholder="Search cards..." autocomplete="off">
                <i class="fas fa-search search-icon"></i>
                <i class="fas fa-times clear-search" id="clear-search"></i>
            </div>
            
            <div class="header-actions">
                <a href="https://discord.gg/fortecommunity" target="_blank" class="discord-button">
                    <i class="fab fa-discord"></i>
                    <span>Join Discord</span>
                </a>
                
                <div id="access-controls"> 
                    <button id="submission-button" class="access-button">
                        <i class="fas fa-upload"></i>
                        <span>Submit Card</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <nav id="set-tab-navigation" class="app-set-navigation">
        <div id="tab-container" class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8">
            </div>
    </nav>

    <div class="app-main-content flex flex-grow">
        <aside class="app-sidebar" id="filter-sidebar">
            <div class="sidebar-toggle" id="sidebar-toggle">
                <i class="fas fa-chevron-left"></i>
            </div>
            
            <div class="sidebar-content">
                <h2 class="text-lg font-semibold mt-1 mb-3 text-[var(--color-text-primary)]">Filters</h2>
                
                <div class="filter-group">
                    <label for="supertype-filter" class="filter-label">Card Category</label>
                    <select id="supertype-filter" class="filter-select">
                        <option value="all">All Categories</option>
                        <option value="Pokémon">Pokémon</option>
                        <option value="Trainer">Trainer</option>
                        <option value="Energy">Energy</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="type-filter" class="filter-label">Type / Subtype</label>
                    <select id="type-filter" class="filter-select">
                        <option value="all">All Types</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="rarity-filter" class="filter-label">Rarity</label>
                    <select id="rarity-filter" class="filter-select">
                        <option value="all">All Rarities</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="creator-filter" class="filter-label">Creator/Artist</label>
                    <select id="creator-filter" class="filter-select">
                        <option value="all">All Creators</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="forte-filter" class="filter-label">Forte Status</label>
                    <select id="forte-filter" class="filter-select">
                        </select>
                </div>
                
                <div class="filter-group">
                    <label for="sort-filter" class="filter-label">Sort By</label>
                    <select id="sort-filter" class="filter-select">
                        <option value="setThenNumber">Set, then Number</option>
                        <option value="name">Name (A-Z)</option>
                        <option value="hp">HP (High to Low)</option>
                        <option value="artist">Artist (A-Z)</option>
                        <option value="rarity">Rarity</option>
                        <option value="recent">Recently Added</option>
                    </select>
                </div>
            </div>
        </aside>

        <main class="app-gallery-area">
            <div class="gallery-controls">
                <div class="flex items-center">
                    <label for="gallery-size-slider" class="size-control-label">Card Size:</label>
                    <input type="range" id="gallery-size-slider" class="size-control-slider" min="1" max="5" value="3" step="1">
                    <div class="size-value-indicator">M</div>
                </div>
                <div id="search-stats" class="text-sm text-[var(--color-text-secondary)] ml-auto"></div>
            </div>
            
            <div id="item-gallery" role="grid" class="p-2 md:p-4"></div>
            <p id="empty-folder-message" class="text-center mt-8 text-lg text-[var(--color-text-secondary)] hidden">
                No cards match your current filters. Try adjusting them!
            </p>
        </main>
    </div>
    
    <footer class="app-footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-links">
                    <a href="https://discord.gg/fortecommunity" target="_blank" class="footer-link">
                        <i class="fab fa-discord"></i> Community Discord
                    </a>
                    <a href="https://github.com/Envoyofhell/Pocket-Image-Previewer" target="_blank" class="footer-link">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                    <a href="https://discord.gg/webdesigner" target="_blank" class="footer-link"> 
                        <i class="fab fa-discord"></i> WebDesigner
                    </a>
                    <button id="footer-credits-link" class="footer-link">
                        <i class="fas fa-info-circle"></i> Credits
                    </button>
                </div>
                <div class="copyright">
                    <p>Designed by <a href="https://discordapp.com/users/your-discord-id-here" target="_blank">WebDesigner</a>. 
                    Pokémon © Nintendo, Game Freak, Creatures.</p>
                </div>
            </div>
            <div class="footer-section">
                <div class="flex items-center gap-2">
                    <span class="text-sm text-[var(--color-text-secondary)]">Version 2.5</span>
                    <span class="text-xs px-2 py-1 bg-purple-900 text-purple-200 rounded-full">Beta</span>
                </div>
            </div>
        </div>
    </footer>

    <div id="fancy-lightbox" class="fancy-lightbox-overlay" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="fancy-lightbox-content">
            <div class="fancy-lightbox-header">
                <h2 class="fancy-lightbox-title">
                    <i class="fas fa-clone mr-2 text-[var(--color-accent)]"></i>
                    <span id="card-title-lightbox">Card Details</span>
                </h2>
                <button id="fancy-lightbox-close" class="fancy-lightbox-close" aria-label="Close card viewer">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="fancy-lightbox-body">
                <div class="fancy-card-image-container" id="fancy-holo-container">
                    <div id="fancy-spinner" class="loader"></div>
                    <div id="fancy-holo-inner">
                        <img id="fancy-card-image" src="#" alt="Card preview" class="hidden">
                    </div>
                </div>
                <aside class="fancy-card-info">
                    <div class="card-detail-section">
                        <div class="info-section-title"><i class="fas fa-id-card"></i><span>Identity</span></div>
                        <div class="info-item"><span class="info-label">Name:</span> <span id="lb-card-name" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Set:</span> <span id="lb-set-name" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Number:</span> <span id="lb-card-number" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Rarity:</span> <span id="lb-rarity" class="info-value">-</span></div>
                    </div>

                    <div id="lb-pokemon-details" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-dna"></i><span>Pokémon Info</span></div>
                        <div class="info-item"><span class="info-label">HP:</span> <span id="lb-hp" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Type(s):</span> <div id="lb-types" class="card-types info-value"></div></div>
                        <div class="info-item" id="lb-stage-item" style="display:none;"><span class="info-label">Stage:</span> <span id="lb-stage" class="info-value">-</span></div>
                        <div class="info-item" id="lb-evolves-from-item" style="display:none;"><span class="info-label">Evolves From:</span> <span id="lb-evolves-from" class="info-value">-</span></div>
                        <div class="info-item" id="lb-pokedex-item" style="display:none;"><span class="info-label">Pokédex Data:</span> <span id="lb-pokedex-data" class="info-value">-</span></div>
                    </div>
                    
                    <div id="lb-trainer-details" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-briefcase"></i><span>Trainer Info</span></div>
                        <div class="info-item"><span class="info-label">Subtype(s):</span> <div id="lb-trainer-subtypes" class="card-types info-value"></div></div>
                    </div>
                    
                    <div id="lb-energy-details" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-bolt"></i><span>Energy Info</span></div>
                        <div class="info-item"><span class="info-label">Type:</span> <div id="lb-energy-types" class="card-types info-value"></div></div>
                    </div>

                    <div id="lb-abilities-section" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-star"></i><span>Abilities</span></div>
                        <div id="lb-abilities-container"></div>
                    </div>
                    
                    <div id="lb-attacks-section" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-fist-raised"></i><span>Attacks</span></div>
                        <div id="lb-attacks-container"></div>
                    </div>
                    
                    <div id="lb-rules-section" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-scroll"></i><span>Rules/Effect</span></div>
                        <div id="lb-rules-text" class="info-value" style="white-space: pre-wrap;"></div>
                    </div>

                    <div id="lb-battle-stats-section" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-shield-alt"></i><span>Battle Stats</span></div>
                        <div id="lb-weakness-container" class="info-item" style="display:none;"><span class="info-label">Weakness:</span> <span id="lb-weakness" class="info-value"></span></div>
                        <div id="lb-resistance-container" class="info-item" style="display:none;"><span class="info-label">Resistance:</span> <span id="lb-resistance" class="info-value"></span></div>
                        <div id="lb-retreat-cost-item" class="info-item" style="display:none;"><span class="info-label">Retreat Cost:</span> <div id="lb-retreat-cost" class="attack-cost"></div></div>
                    </div>

                    <div id="lb-flavor-text-section" class="card-detail-section" style="display:none;">
                        <div class="info-section-title"><i class="fas fa-quote-left"></i><span>Flavor Text</span></div>
                        <div id="lb-flavor-text" class="info-value" style="font-style: italic; opacity: 0.9;">-</div>
                    </div>

                    <div class="card-detail-section">
                        <div class="info-section-title"><i class="fas fa-pencil-alt"></i><span>Credits & Meta</span></div>
                        <div class="info-item"><span class="info-label">Artist:</span> <span id="lb-artist" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Creator (Discord):</span> <span id="lb-creator" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Forte Card:</span> <span id="lb-is-forte" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Regulation:</span> <span id="lb-regulation" class="info-value">-</span></div>
                        <div class="info-item"><span class="info-label">Approved:</span> <span id="lb-approved-date" class="info-value">-</span></div>
                    </div>
                </aside>
            </div>
            <div class="fancy-nav-controls">
                <button id="fancy-prev-button" class="fancy-nav-button" aria-label="Previous card">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button id="fancy-next-button" class="fancy-nav-button" aria-label="Next card">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
             <div class="fancy-card-actions">
                </div>
        </div>
    </div>
    
    <div class="copy-tooltip" id="copy-tooltip">Copied to clipboard!</div>


    <script src="js/app.js" type="module"></script>
    <script src="js/search.js"></script>
    <script src="js/gallery.js"></script>
    <script src="js/lightbox.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/ui-controls.js"></script>
    
    <script src="js/settings.js"></script>
    <script src="js/legendpopup.js"></script>
    <script src="js/submissions.js"></script> <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Submission button functionality (if not handled by submissions.js)
            const submitBtn = document.getElementById('submission-button');
            if (submitBtn) {
                submitBtn.addEventListener('click', function() {
                    const formUrl = (typeof SITE_CONFIG !== 'undefined' && SITE_CONFIG.submissionFormUrl) 
                                    ? SITE_CONFIG.submissionFormUrl 
                                    : 'https://forms.google.com/your-form-url-here'; // Fallback URL
                    if (formUrl !== 'https://forms.google.com/your-form-url-here') {
                         window.open(formUrl, '_blank');
                    } else {
                        console.warn('Submission form URL not configured in SITE_CONFIG.submissionFormUrl or submissions.js');
                        // Optionally, display a message to the user that the feature is not configured.
                        alert('Card submission form is not configured yet.');
                    }
                });
            }
            
            // Sidebar visibility logic should ideally be fully handled by ui-controls.js
            // including loading saved state.
            // const sidebar = document.getElementById('filter-sidebar');
            // if (sidebar && !localStorage.getItem('sidebarCollapsed') === 'true') { // Example check
            //  sidebar.classList.remove('collapsed');
            // } else if (sidebar) {
            //  sidebar.classList.add('collapsed');
            // }
        });
    </script>
</body>
</html>
